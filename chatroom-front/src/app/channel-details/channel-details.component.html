<div class="dark:bg-gray-800 bg-gray-200 w-full h-96 relative rounded-xl p-4 flex flex-col">
  <div class="dark:text-white text-sm font-semibold mb-4">
    Canal de discussion n°: {{ room.id }}
  </div>

  <button class="absolute top-2 right-7 text-black dark:text-white" (click)="toggleUserList()">
    <i class="bi bi-person-lines-fill"></i>
  </button>
  <button class="absolute top-2 right-2 text-black dark:text-white" (click)="leaveChatRoom(room)">✖</button>

  <div *ngIf="userListVisible" class="absolute top-12 right-1 bg-white dark:bg-gray-700 rounded-lg shadow-lg p-4 w-64 z-50">
    <h3 class="text-black dark:text-white text-lg mb-4">Liste des utilisateurs</h3>
		<ul class="list-none p-0">
			<li *ngFor="let user of users" class="text-black dark:text-white py-2 text-sm">
			{{ user.firstName }}
			</li>
		</ul>
  </div>

  <div class="flex-1 overflow-y-auto flex flex-col gap-2 mb-4" #messagesContainer>
    <div *ngFor="let message of room.messages" class="flex flex-col gap-2">
      <app-message-details [message]="message"></app-message-details>
    </div>
    <div *ngFor="let message of newUserMessages" class="bg-cyan-800 rounded-xl p-1 text-white">
      <p class="text-center text-sm">{{ message }}</p>
    </div>
		<div *ngIf="typingMessage" class="text-gray-500 italic text-sm">
			{{ typingMessage }}
		</div>
  </div>

  <div class="border dark:border-gray-300 rounded-full p-2 flex items-center dark:bg-transparent bg-white">
    <input (input)="userIsTyping()" type="text" [(ngModel)]="messageContent" class="w-full bg-transparent pl-3 text-black dark:text-white outline-none" placeholder="Écrire un message..." (keydown.enter)="sendMessage(messageContent)">
    <button (click)="sendMessage(messageContent)" class="bg-green-700 text-white px-4 py-1.5 rounded-full hover:bg-green-800">
      Envoyer
    </button>
  </div>
</div>
